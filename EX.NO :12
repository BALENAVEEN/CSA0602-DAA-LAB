#include <stdio.h>
#include <stdlib.h>
#include <limits.h>

long long robLinear(long long arr[], int start, int end) {
    // Rob houses from index start to end inclusive in a linear row.
    if (start > end) return 0;
    long long prev2 = 0; // dp[i-2]
    long long prev1 = 0; // dp[i-1]
    for (int i = start; i <= end; i++) {
        long long take = prev2 + arr[i];
        long long notTake = prev1;
        long long cur = (take > notTake) ? take : notTake;
        prev2 = prev1;
        prev1 = cur;
    }
    return prev1;
}

long long robCircular(long long nums[], int n) {
    if (n == 0) return 0;
    if (n == 1) return nums[0];
    if (n == 2) return (nums[0] > nums[1]) ? nums[0] : nums[1];

    long long ans1 = robLinear(nums, 0, n - 2); // exclude last
    long long ans2 = robLinear(nums, 1, n - 1); // exclude first

    return (ans1 > ans2) ? ans1 : ans2;
}

int main() {
    // Example (i)
    long long nums1[] = {2, 3, 2};
    int n1 = sizeof(nums1) / sizeof(nums1[0]);
    printf("Input: nums = [2, 3, 2]\n");
    printf("Output: The maximum money you can rob without alerting the police is %lld\n\n",
           robCircular(nums1, n1));

    // Example (ii)
    long long nums2[] = {1, 2, 3, 1};
    int n2 = sizeof(nums2) / sizeof(nums2[0]);
    printf("Input: nums = [1, 2, 3, 1]\n");
    printf("Output: The maximum money you can rob without alerting the police is %lld\n",
           robCircular(nums2, n2));

    return 0;
}
